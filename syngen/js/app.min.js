"use strict"; Array.from || (Array.from = function () { var e = Object.prototype.toString, t = function (t) { return "function" == typeof t || "[object Function]" === e.call(t) }, o = Math.pow(2, 53) - 1, r = function (e) { var t = function (e) { var t = Number(e); return isNaN(t) ? 0 : 0 !== t && isFinite(t) ? (t > 0 ? 1 : -1) * Math.floor(Math.abs(t)) : t }(e); return Math.min(Math.max(t, 0), o) }; return function (e) { var o = Object(e); if (null == e) throw new TypeError("Array.from requires an array-like object - not null or undefined"); var n, l = arguments.length > 1 ? arguments[1] : void 0; if (void 0 !== l) { if (!t(l)) throw new TypeError("Array.from: when provided, the second argument must be a function"); arguments.length > 2 && (n = arguments[2]) } for (var i, s = r(o.length), c = t(this) ? Object(new this(s)) : new Array(s), a = 0; a < s;)i = o[a], c[a] = l ? void 0 === n ? l(i, a) : l.call(n, i, a) : i, a += 1; return c.length = s, c } }()), window.NodeList && !NodeList.prototype.forEach && (NodeList.prototype.forEach = Array.prototype.forEach); var demos = document.querySelectorAll(".demo"); function email_test(e) { return !/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value) } function DynamicAdapt(e) { this.type = e } demos.forEach(function (e) { e.style.color = "red" }), DynamicAdapt.prototype.init = function () { var e = this, t = this; this.оbjects = [], this.daClassname = "_dynamic_adapt_", this.nodes = document.querySelectorAll("[data-da]"); for (var o = 0; o < this.nodes.length; o++) { var r = this.nodes[o], n = r.dataset.da.trim().split(","), l = {}; l.element = r, l.parent = r.parentNode, l.destination = document.querySelector(n[0].trim()), l.breakpoint = n[1] ? n[1].trim() : "767", l.place = n[2] ? n[2].trim() : "last", l.index = this.indexInParent(l.parent, l.element), this.оbjects.push(l) } this.arraySort(this.оbjects), this.mediaQueries = Array.prototype.map.call(this.оbjects, function (e) { return "(" + this.type + "-width: " + e.breakpoint + "px)," + e.breakpoint }, this), this.mediaQueries = Array.prototype.filter.call(this.mediaQueries, function (e, t, o) { return Array.prototype.indexOf.call(o, e) === t }); for (var i = function (o) { var r = e.mediaQueries[o], n = String.prototype.split.call(r, ","), l = window.matchMedia(n[0]), i = n[1], s = Array.prototype.filter.call(e.оbjects, function (e) { return e.breakpoint === i }); l.addListener(function () { t.mediaHandler(l, s) }), e.mediaHandler(l, s) }, s = 0; s < this.mediaQueries.length; s++)i(s) }, DynamicAdapt.prototype.mediaHandler = function (e, t) { if (e.matches) for (var o = 0; o < t.length; o++) { var r = t[o]; r.index = this.indexInParent(r.parent, r.element), this.moveTo(r.place, r.element, r.destination) } else for (var n = 0; n < t.length; n++) { var l = t[n]; l.element.classList.contains(this.daClassname) && this.moveBack(l.parent, l.element, l.index) } }, DynamicAdapt.prototype.moveTo = function (e, t, o) { t.classList.add(this.daClassname), "last" === e || e >= o.children.length ? o.insertAdjacentElement("beforeend", t) : "first" !== e ? o.children[e].insertAdjacentElement("beforebegin", t) : o.insertAdjacentElement("afterbegin", t) }, DynamicAdapt.prototype.moveBack = function (e, t, o) { t.classList.remove(this.daClassname), void 0 !== e.children[o] ? e.children[o].insertAdjacentElement("beforebegin", t) : e.insertAdjacentElement("beforeend", t) }, DynamicAdapt.prototype.indexInParent = function (e, t) { var o = Array.prototype.slice.call(e.children); return Array.prototype.indexOf.call(o, t) }, DynamicAdapt.prototype.arraySort = function (e) { "min" === this.type ? Array.prototype.sort.call(e, function (e, t) { return e.breakpoint === t.breakpoint ? e.place === t.place ? 0 : "first" === e.place || "last" === t.place ? -1 : "last" === e.place || "first" === t.place ? 1 : e.place - t.place : e.breakpoint - t.breakpoint }) : Array.prototype.sort.call(e, function (e, t) { return e.breakpoint === t.breakpoint ? e.place === t.place ? 0 : "first" === e.place || "last" === t.place ? 1 : "last" === e.place || "first" === t.place ? -1 : t.place - e.place : t.breakpoint - e.breakpoint }) }; var da = new DynamicAdapt("max"); da.init(); var ua = window.navigator.userAgent, msie = ua.indexOf("MSIE "), isMobile = { Android: function () { return navigator.userAgent.match(/Android/i) }, BlackBerry: function () { return navigator.userAgent.match(/BlackBerry/i) }, iOS: function () { return navigator.userAgent.match(/iPhone|iPad|iPod/i) }, Opera: function () { return navigator.userAgent.match(/Opera Mini/i) }, Windows: function () { return navigator.userAgent.match(/IEMobile/i) }, any: function () { return isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows() } }; function isIE() { return (ua = navigator.userAgent).indexOf("MSIE ") > -1 || ua.indexOf("Trident/") > -1 } function ibg() { if (isIE()) for (var e = document.querySelectorAll("._ibg"), t = 0; t < e.length; t++)e[t].querySelector("img") && null != e[t].querySelector("img").getAttribute("src") && (e[t].style.backgroundImage = "url(" + e[t].querySelector("img").getAttribute("src") + ")") } isIE() && document.querySelector("html").classList.add("ie"), isMobile.any() && document.querySelector("html").classList.add("_touch"), ibg(), window.addEventListener("load", function () { document.querySelector(".wrapper") && setTimeout(function () { document.querySelector(".wrapper").classList.add("_loaded") }, 0) }); var unlock = !0; if (location.hash) { var hsh = location.hash.replace("#", ""); document.querySelector(".popup_" + hsh) ? popup_open(hsh) : document.querySelector("div." + hsh) && _goto(document.querySelector("." + hsh), 1500, "") } var iconMenu = document.querySelector(".menu-burger"); if (null != iconMenu) { var delay = 500, menuBody = document.querySelector(".menu__body"); iconMenu.addEventListener("click", function (e) { unlock && (body_lock(delay), iconMenu.classList.toggle("_active"), menuBody.classList.toggle("_active")) }) } function menu_close() { var e = document.querySelector(".menu-burger"), t = document.querySelector(".menu__body"); e.classList.remove("_active"), t.classList.remove("_active") } function body_lock(e) { document.querySelector("body").classList.contains("_lock") ? body_lock_remove(e) : body_lock_add(e) } function body_lock_remove(e) { var t = document.querySelector("body"); if (unlock) { var o = document.querySelectorAll("._lp"); setTimeout(function () { for (var e = 0; e < o.length; e++) { o[e].style.paddingRight = "0px" } t.style.paddingRight = "0px", t.classList.remove("_lock") }, e), unlock = !1, setTimeout(function () { unlock = !0 }, e) } } function body_lock_add(e) { var t = document.querySelector("body"); if (unlock) { for (var o = document.querySelectorAll("._lp"), r = 0; r < o.length; r++) { o[r].style.paddingRight = window.innerWidth - document.querySelector(".wrapper").offsetWidth + "px" } t.style.paddingRight = window.innerWidth - document.querySelector(".wrapper").offsetWidth + "px", t.classList.add("_lock"), unlock = !1, setTimeout(function () { unlock = !0 }, e) } } for (var tabs = document.querySelectorAll("._tabs"), _loop2 = function (e) { for (var t = tabs[e], o = t.querySelectorAll("._tabs-item"), r = t.querySelectorAll("._tabs-block"), n = function (e) { var t = o[e]; t.addEventListener("click", function (n) { for (var l = 0; l < o.length; l++) { o[l].classList.remove("_active"), r[l].classList.remove("_active") } t.classList.add("_active"), r[e].classList.add("_active"), n.preventDefault() }) }, l = 0; l < o.length; l++)n(l) }, index = 0; index < tabs.length; index++)_loop2(index); var spollersArray = document.querySelectorAll("[data-spollers]"), entSpollersArray = document.querySelectorAll("[data-ent-spollers]"); if (spollersArray.length > 0) { var initSpollers = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; e.forEach(function (e) { e = t ? e.item : e, t.matches || !t ? (e.classList.add("_init"), initSpollerBody(e), e.addEventListener("click", setSpollerAction)) : (e.classList.remove("_init"), initSpollerBody(e, !1), e.removeEventListener("click", setSpollerAction)) }) }, initSpollerBody = function (e) { var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], o = e.querySelectorAll("[data-spoller]"); o.length > 0 && o.forEach(function (e) { t ? (e.removeAttribute("tabindex"), e.classList.contains("_active") || (e.nextElementSibling.hidden = !0)) : (e.setAttribute("tabindex", "-1"), e.nextElementSibling.hidden = !1) }) }, setSpollerAction = function (e) { var t = e.target; if (t.hasAttribute("data-spoller") || t.closest("[data-spoller]")) { var o = t.hasAttribute("data-spoller") ? t : t.closest("[data-spoller]"), r = o.closest("[data-spollers]"), n = !!r.hasAttribute("data-one-spoller"); r.querySelectorAll("._slide").length || (n && !o.classList.contains("_active") && hideSpollersBody(r), o.classList.toggle("_active"), _slideToggle(o.nextElementSibling, 500)), e.preventDefault() } }, hideSpollersBody = function (e) { var t = e.querySelector("[data-spoller]._active"); t && (t.classList.remove("_active"), _slideUp(t.nextElementSibling, 500)) }, spollersRegular = Array.from(spollersArray).filter(function (e, t, o) { return !e.dataset.spollers.split(",")[0] }); spollersRegular.length > 0 && initSpollers(spollersRegular); var spollersMedia = Array.from(spollersArray).filter(function (e, t, o) { return e.dataset.spollers.split(",")[0] }); if (spollersMedia.length > 0) { var breakpointsArray = []; spollersMedia.forEach(function (e) { var t = {}, o = e.dataset.spollers.split(","); t.value = o[0], t.type = o[1] ? o[1].trim() : "max", t.item = e, breakpointsArray.push(t) }); var mediaQueries = breakpointsArray.map(function (e) { return "(" + e.type + "-width: " + e.value + "px)," + e.value + "," + e.type }); (mediaQueries = mediaQueries.filter(function (e, t, o) { return o.indexOf(e) === t })).forEach(function (e) { var t = e.split(","), o = t[1], r = t[2], n = window.matchMedia(t[0]), l = breakpointsArray.filter(function (e) { if (e.value === o && e.type === r) return !0 }); n.addListener(function () { initSpollers(l, n) }), initSpollers(l, n) }) } } for (var popup_link = document.querySelectorAll("._popup-link"), popups = document.querySelectorAll(".popup"), _loop3 = function (e) { var t = popup_link[e]; t.addEventListener("click", function (e) { unlock && popup_open(t.getAttribute("href").replace("#", ""), t.getAttribute("data-video")); e.preventDefault() }) }, _index = 0; _index < popup_link.length; _index++)_loop3(_index); for (var _index2 = 0; _index2 < popups.length; _index2++) { var popup = popups[_index2]; popup.addEventListener("click", function (e) { e.target.closest(".popup__body") || popup_close(e.target.closest(".popup")) }) } function popup_open(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ""; document.querySelectorAll(".popup._active").length > 0 && popup_close("", !1); var o = document.querySelector(".popup_" + e); if (o && unlock) { if ("" != t && null != t) document.querySelector(".popup_video").querySelector(".popup__video").innerHTML = '<iframe src="https://www.youtube.com/embed/' + t + '?autoplay=1"  allow="autoplay; encrypted-media" allowfullscreen></iframe>'; document.querySelector(".menu__body._active") || body_lock_add(500), o.classList.add("_active"), history.pushState("", "", "#" + e) } } function popup_close(e) { var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; if (unlock) { if (e) { var o = e.querySelector(".popup__video"); o && (o.innerHTML = ""), e.classList.remove("_active") } else for (var r = 0; r < popups.length; r++) { var n = popups[r], l = n.querySelector(".popup__video"); l && (l.innerHTML = ""), n.classList.remove("_active") } !document.querySelector(".menu__body._active") && t && body_lock_remove(500), history.pushState("", "", window.location.href.split("#")[0]) } } document.querySelector(".header__wrapper").style.paddingRight = window.innerWidth - document.querySelector(".wrapper").offsetWidth + "px"; var popup_close_icon = document.querySelectorAll(".popup__close,._popup-close"); if (popup_close_icon) for (var _loop4 = function (e) { var t = popup_close_icon[e]; t.addEventListener("click", function () { popup_close(t.closest(".popup")) }) }, _index4 = 0; _index4 < popup_close_icon.length; _index4++)_loop4(_index4); document.addEventListener("keydown", function (e) { "Escape" === e.code && popup_close() }); var _slideUp = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 500; e.classList.contains("_slide") || (e.classList.add("_slide"), e.style.transitionProperty = "height, margin, padding", e.style.transitionDuration = t + "ms", e.style.height = e.offsetHeight + "px", e.offsetHeight, e.style.overflow = "hidden", e.style.height = 0, e.style.paddingTop = 0, e.style.paddingBottom = 0, e.style.marginTop = 0, e.style.marginBottom = 0, window.setTimeout(function () { e.hidden = !0, e.style.removeProperty("height"), e.style.removeProperty("padding-top"), e.style.removeProperty("padding-bottom"), e.style.removeProperty("margin-top"), e.style.removeProperty("margin-bottom"), e.style.removeProperty("overflow"), e.style.removeProperty("transition-duration"), e.style.removeProperty("transition-property"), e.classList.remove("_slide") }, t)) }, _slideDown = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 500; if (!e.classList.contains("_slide")) { e.classList.add("_slide"), e.hidden && (e.hidden = !1); var o = e.offsetHeight; e.style.overflow = "hidden", e.style.height = 0, e.style.paddingTop = 0, e.style.paddingBottom = 0, e.style.marginTop = 0, e.style.marginBottom = 0, e.offsetHeight, e.style.transitionProperty = "height, margin, padding", e.style.transitionDuration = t + "ms", e.style.height = o + "px", e.style.removeProperty("padding-top"), e.style.removeProperty("padding-bottom"), e.style.removeProperty("margin-top"), e.style.removeProperty("margin-bottom"), window.setTimeout(function () { e.style.removeProperty("height"), e.style.removeProperty("overflow"), e.style.removeProperty("transition-duration"), e.style.removeProperty("transition-property"), e.classList.remove("_slide") }, t) } }, _slideToggle = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 500; return e.hidden ? _slideDown(e, t) : _slideUp(e, t) }; function _removeClasses(e, t) { for (var o = 0; o < e.length; o++)e[o].classList.remove(t) } function _is_hidden(e) { return null === e.offsetParent } Element.prototype.closest || (Element.prototype.closest = function (e) { for (var t = this; t;) { if (t.matches(e)) return t; t = t.parentElement } return null }), Element.prototype.matches || (Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector), window.onload = function () { document.querySelectorAll("._hidden").forEach(function (e) { return e.classList.remove("_hidden") }); var e = document.querySelectorAll("._placeholder-parent"); e.length > 0 && e.forEach(function (e) { var t = e.querySelector(".input"), o = e.querySelector("._placeholder"); t.addEventListener("focus", function (e) { o.classList.add("_hidden") }), t.addEventListener("blur", function (e) { e.target && "" === e.target.value.trim() && o.classList.remove("_hidden") }) }); var t = document.querySelector(".product-body__line"), o = document.querySelectorAll(".product-body__navitem"); t && (t.style.width = "".concat(o[0].offsetWidth, "px"), o.forEach(function (e) { e.addEventListener("mouseenter", function (e) { setTimeout(function () { t.style.width = "".concat(e.target.offsetWidth, "px"), t.style.left = "".concat(e.target.offsetLeft, "px") }, 10) }), e.addEventListener("mouseleave", function () { var e = document.querySelector(".product-body__navitem._active"); t.style.width = "".concat(e.offsetWidth, "px"), t.style.left = "".concat(e.offsetLeft, "px") }) })); var r = document.querySelectorAll(".quantity__button"); r.length > 0 && function () { for (var e = function (e) { var t = e.closest("tr"); i = +t.querySelector(".product-price .amount").textContent.replace(/\D/g, ""), s = +t.querySelector(".quantity__input input").value, c = t.querySelector(".product-subtotal .amount ._amount-digits"), d = i * s }, t = function () { c.innerHTML = d }, o = function () { p = 0, u.querySelectorAll(".product-subtotal .amount").forEach(function (e) { p += +e.textContent.replace(/\D/g, "") }), a.innerHTML = p }, n = function (e) { var t = r[e]; t.addEventListener("click", function (e) { var o = parseInt(t.closest(".quantity").querySelector("input").value); t.classList.contains("quantity__button_plus") ? o++ : (o -= 1) < 1 && (o = 1), t.closest(".quantity").querySelector("input").value = o }) }, l = 0; l < r.length; l++)n(l); var i, s, c, a = document.querySelector(".cart-block__total .amount ._amount-digits"), u = document.querySelector(".cart-block table"), d = 0, p = 0; if (o(), document.querySelector(".cart-block")) for (var f = u.querySelectorAll(".quantity"), _ = 0; _ < f.length; _++) { var v = f[_]; v.querySelector(".quantity__button_plus").addEventListener("click", function (r) { e(r.target), t(), o() }), v.querySelector(".quantity__button_minus").addEventListener("click", function (r) { e(r.target), t(), o() }), v.querySelector(".quantity__input input").addEventListener("change", function (r) { e(r.target), t(), o() }) } }(); var n = document.querySelector(".sidebar__body"), l = document.querySelector(".sidebar__mob-top"); function i() { l && (window.innerWidth < 992 ? (n.hidden = !0, l.addEventListener("click", function (e) { _slideToggle(n, 500) })) : n.hidden = !1) } !function (e, t, o) { o = o || window; var r = !1; o.addEventListener(e, function () { r || (r = !0, requestAnimationFrame(function () { o.dispatchEvent(new CustomEvent(t)), r = !1 })) }) }("resize", "optimizedResize"), window.addEventListener("optimizedResize", function () { i() }), i(), document.addEventListener("click", function (e) { var t = e.target; t.classList.contains("popular__more") && t.classList.add("_hide"); window.innerWidth > 767 && isMobile.any() && (t.classList.contains("menu-item-has-children") && (e.preventDefault(), t.classList.toggle("_hover"), document.querySelectorAll(".menu-item-has-children._hover").length > 1 && _removeClasses(document.querySelectorAll(".menu-item-has-children._hover"), "_hover")), t.classList.contains("menu-item-has-children") || _removeClasses(document.querySelectorAll(".menu-item-has-children._hover"), "_hover")) }); document.querySelectorAll("form"); document.querySelectorAll(".upload-file__input").forEach(function (e) { var t, o = document.querySelector(".upload-file__text"); e.addEventListener("change", function (o) { t = []; for (var n = 0; n < e.files.length; n++)t.push(e.files[n]); t.forEach(function (e) { r(e) }) }); var r = function (e) { e.size > 1048576 ? alert("Файл должен быть не более 1 МБ.") : e && e.length > 1 ? (e.length <= 4 && (o.textContent = "Выбрано ".concat(e.length, " файла")), e.length > 4 && (o.textContent = "Выбрано ".concat(e.length, " файлов"))) : o.textContent = e.name } }) }; var selects = document.getElementsByTagName("select"); function selects_init() { for (var e = 0; e < selects.length; e++) { select_init(selects[e]) } document.addEventListener("click", function (e) { selects_close(e) }), document.addEventListener("keydown", function (e) { "Escape" === e.code && selects_close(e) }) } function selects_close(e) { var t = document.querySelectorAll(".select"); if (!e.target.closest(".select") && !e.target.classList.contains("_option")) for (var o = 0; o < t.length; o++) { var r = t[o], n = r.querySelector(".select__options"); r.classList.remove("_active"), _slideUp(n, 100) } } function select_init(e) { var t = e.parentElement, o = e.getAttribute("class"), r = e.querySelector("option:checked"); e.setAttribute("data-default", r.value), e.style.display = "none", t.insertAdjacentHTML("beforeend", '<div class="select select_' + o + '"></div>'), e.parentElement.querySelector(".select").appendChild(e), select_item(e) } function select_item(e) { var t = e.parentElement, o = t.querySelector(".select__item"), r = e.querySelectorAll("option"), n = e.querySelector("option:checked").text, l = e.getAttribute("data-type"); o && o.remove(); var i = ""; i = "input" == l ? '<div class="select__value icon-select-arrow"><input autocomplete="off" type="text" name="form[]" value="' + n + '" data-error="Ошибка" data-value="' + n + '" class="select__input"></div>' : '<div class="select__value icon-select-arrow"><span>' + n + "</span></div>", t.insertAdjacentHTML("beforeend", '<div class="select__item"><div class="select__title">' + i + '</div><div hidden class="select__options">' + select_get_options(r) + "</div></div></div>"), select_actions(e, t) } function select_actions(e, t) { var o = t.querySelector(".select__item"), r = t.querySelector(".select__title"), n = t.querySelector(".select__options"), l = t.querySelectorAll(".select__option"), i = e.getAttribute("data-type"), s = t.querySelector(".select__input"); function c(e) { if (!e) { for (var r = document.querySelectorAll(".select"), l = 0; l < r.length; l++) { var i = r[l], s = i.querySelector(".select__options"); i != o.closest(".select") && (i.classList.remove("_active"), _slideUp(s, 100)) } _slideToggle(n, 100), t.classList.toggle("_active") } } r.addEventListener("click", function (e) { c() }); for (var a = function (o) { var r = l[o], n = r.getAttribute("data-value"), a = r.innerHTML; "input" == i ? s.addEventListener("keyup", select_search) : r.getAttribute("data-value") != e.value || e.hasAttribute("multiple") || (r.style.display = "none"), r.addEventListener("click", function () { for (var o = 0; o < l.length; o++) { l[o].style.display = "block" } var u; "input" == i ? (s.value = a, e.value = n) : e.hasAttribute("multiple") ? (r.classList.toggle("_selected"), function () { for (var o = t.querySelectorAll(".select__option"), r = e.querySelectorAll("option"), n = [], l = 0; l < o.length; l++) { var i = o[l]; if (r[l].removeAttribute("selected"), i.classList.contains("_selected")) { var s = i.innerHTML; n.push(s), r[l].setAttribute("selected", "selected") } } t.querySelector(".select__value").innerHTML = "<span>" + n + "</span>" }()) : (t.querySelector(".select__value").innerHTML = "<span>" + a + "</span>", e.value = n, r.style.display = "none"), e.hasAttribute("multiple") && (u = "multiple"), c(u) }) }, u = 0; u < l.length; u++)a(u) } function select_get_options(e) { if (e) { for (var t = "", o = 0; o < e.length; o++) { var r = e[o], n = r.value; if ("" != n) t = t + '<div data-value="' + n + '" class="select__option">' + r.innerHTML + "</div>" } return t } } function select_search(e) { e.target.closest(".select ").querySelector(".select__options"); for (var t = e.target.closest(".select ").querySelectorAll(".select__option"), o = e.target.value.toUpperCase(), r = 0; r < t.length; r++) { var n = t[r]; (n.textContent || n.innerText).toUpperCase().indexOf(o) > -1 ? n.style.display = "" : n.style.display = "none" } } function selects_update_all() { var e = document.querySelectorAll("select"); if (e) for (var t = 0; t < e.length; t++) { select_item(e[t]) } } selects.length > 0 && selects_init(); var currentScroll, scr_body = document.querySelector("body"), scr_blocks = document.querySelectorAll("._scr-sector"), scr_items = document.querySelectorAll("._scr-item"), scr_fix_block = document.querySelectorAll("._side-wrapper"), scr_min_height = 750, scrolling = !0, scrolling_full = !0, scrollDirection = 0; function scroll_scroll() { var e = currentScroll = pageYOffset, t = document.querySelector("header.header"); if (null !== t && (e > 10 ? t.classList.add("_scroll") : t.classList.remove("_scroll")), scr_blocks.length > 0) for (var o = 0; o < scr_blocks.length; o++) { var r = scr_blocks[o], n = offset(r).top, l = r.offsetHeight; pageYOffset > n - window.innerHeight / 1.5 && pageYOffset < n + l - window.innerHeight / 5 ? r.classList.add("_scr-sector_active") : r.classList.contains("_scr-sector_active") && r.classList.remove("_scr-sector_active"), pageYOffset > n - window.innerHeight / 2 && pageYOffset < n + l - window.innerHeight / 5 ? r.classList.contains("_scr-sector_current") || r.classList.add("_scr-sector_current") : r.classList.contains("_scr-sector_current") && r.classList.remove("_scr-sector_current") } if (scr_items.length > 0) for (var i = 0; i < scr_items.length; i++) { var s = scr_items[i], c = offset(s).top, a = s.offsetHeight, u = window.innerHeight - (window.innerHeight - a / 3); window.innerHeight > a && (u = window.innerHeight - a / 3), e > c - u && e < c + a && (s.classList.add("_active"), scroll_load_item(s)), e > c - window.innerHeight && s.querySelectorAll("._lazy").length > 0 && scroll_lazy(s) } scr_fix_block.length > 0 && fix_block(scr_fix_block, e); var d = document.querySelector("._custom-scroll__line"); if (d) { var p = window.innerHeight, f = document.querySelector(".wrapper").offsetHeight, _ = pageYOffset / (f - p) * 100, v = d.offsetHeight; d.style.transform = "translateY(" + (p - v) / 100 * _ + "px)" } scrollDirection = e <= 0 ? 0 : e } function scroll_lazy(e) { var t = e.querySelectorAll("*[data-src]"); if (t.length > 0) for (var o = 0; o < t.length; o++) { var r = t[o]; r.classList.contains("_loaded") || (r.setAttribute("src", r.getAttribute("data-src")), r.classList.add("_loaded")) } var n = e.querySelectorAll("*[data-srcset]"); if (n.length > 0) for (var l = 0; l < n.length; l++) { var i = n[l]; i.classList.contains("_loaded") || (i.setAttribute("srcset", i.getAttribute("data-srcset")), i.classList.add("_loaded")) } } function scroll_load_item(e) { e.classList.contains("_load-map") && !e.classList.contains("_loaded-map") && (document.getElementById("map") && (e.classList.add("_loaded-map"), map())) } function map() { var e = document.querySelector("script[data-src]"), t = e.dataset.src; t && (e.removeAttribute("data-src"), e.setAttribute("src", t)) } function scrParallax(e, t, o) { var r = e.querySelectorAll("._prlx-item"); if (r.length > 0) for (var n = 0; n < r.length; n++) { var l = r[n], i = o / 100 * t / (l.dataset.prlx ? l.dataset.prlx : 3) * -1; l.style.cssText = "transform: translateY(".concat(i, "px);") } } if (window.addEventListener("scroll", scroll_scroll), setTimeout(function () { scroll_scroll() }, 100), scr_blocks.length > 0 && !isMobile.any()) { disableScroll(), window.addEventListener("wheel", full_scroll); var swiperScrolls = document.querySelectorAll("._swiper_scroll"); if (swiperScrolls.length > 0) for (var _index19 = 0; _index19 < swiperScrolls.length; _index19++) { var swiperScroll = swiperScrolls[_index19]; swiperScroll.addEventListener("mouseenter", function (e) { window.removeEventListener("wheel", full_scroll) }), swiperScroll.addEventListener("mouseleave", function (e) { window.addEventListener("wheel", full_scroll) }) } } function getPrevBlockPos(e) { var t = window.innerHeight, o = e.offsetHeight, r = offset(e).top; return o >= t && (r += o - t), r } function full_scroll(e) { var t = window.innerHeight; if (t >= scr_min_height) if (scrolling_full) { var o = document.querySelector("._scr-sector._scr-sector_current"), r = offset(o).top, n = o.offsetHeight, l = o.nextElementSibling, i = o.previousElementSibling; if (40 == e.keyCode || 34 == e.keyCode || e.deltaX > 0 || e.deltaY < 0) n <= t ? i && full_scroll_to_sector(getPrevBlockPos(i)) : (enableScroll(), currentScroll <= r && i && full_scroll_to_sector(getPrevBlockPos(i))); else if (38 == e.keyCode || 33 == e.keyCode || e.deltaX < 0 || e.deltaY > 0) { if (n <= t) { if (l) full_scroll_to_sector(offset(l).top) } else if (enableScroll(), l) { var s = offset(l).top; currentScroll >= s - t && full_scroll_to_sector(s) } } } else disableScroll(); else enableScroll() } function full_scroll_to_sector(e) { disableScroll(), scrolling_full = !1, _goto(e, 800); var t = 500; -1 != navigator.appVersion.indexOf("Mac") && (t = 1e3), setTimeout(function () { scrolling_full = !0 }, t) } function full_scroll_pagestart() { } function full_scroll_pageend() { } var link = document.querySelectorAll("._goto-block"); if (link) { for (var blocks = [], _loop7 = function (e) { var t = link[e], o = t.getAttribute("href").replace("#", ""); "" == o || ~blocks.indexOf(o) || blocks.push(o), t.addEventListener("click", function (e) { document.querySelector(".menu__body._active") && (menu_close(), body_lock_remove(500)); var o = t.getAttribute("href").replace("#", ""); _goto(document.querySelector("." + o), 300), e.preventDefault() }) }, _index20 = 0; _index20 < link.length; _index20++)_loop7(_index20); window.addEventListener("scroll", function (e) { var t = document.querySelectorAll("._goto-block._active"); if (t) for (var o = 0; o < t.length; o++) { t[o].classList.remove("_active") } for (var r = 0; r < blocks.length; r++) { var n = blocks[r], l = document.querySelector("." + n); if (l) { var i = offset(l).top, s = l.offsetHeight; if (pageYOffset > i - window.innerHeight / 3 && pageYOffset < i + s - window.innerHeight / 3) for (var c = document.querySelectorAll('._goto-block[href="#' + n + '"]'), a = 0; a < c.length; a++) { c[a].classList.add("_active") } } } }) } var goto_links = document.querySelectorAll("._goto"); if (goto_links) for (var _loop8 = function (e) { var t = goto_links[e]; t.addEventListener("click", function (e) { var o = t.getAttribute("href").replace("#", ""); _goto(document.querySelector("." + o), 800), e.preventDefault() }) }, _index24 = 0; _index24 < goto_links.length; _index24++)_loop8(_index24); function _goto(e, t) { var o = { speedAsDuration: !0, speed: t, header: "header", offset: arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, easing: "easeOutQuad" }; (new SmoothScroll).animateScroll(e, "", o) } function offset(e) { var t = e.getBoundingClientRect(), o = window.pageXOffset || document.documentElement.scrollLeft, r = window.pageYOffset || document.documentElement.scrollTop; return { top: t.top + r, left: t.left + o } } function disableScroll() { window.addEventListener && window.addEventListener("DOMMouseScroll", preventDefault, !1), document.addEventListener("wheel", preventDefault, { passive: !1 }), window.onwheel = preventDefault, window.onmousewheel = document.onmousewheel = preventDefault, window.ontouchmove = preventDefault, document.onkeydown = preventDefaultForScrollKeys } function enableScroll() { window.removeEventListener && window.removeEventListener("DOMMouseScroll", preventDefault, !1), document.removeEventListener("wheel", preventDefault, { passive: !1 }), window.onmousewheel = document.onmousewheel = null, window.onwheel = null, window.ontouchmove = null, document.onkeydown = null } function preventDefault(e) { (e = e || window.event).preventDefault && e.preventDefault(), e.returnValue = !1 } function preventDefaultForScrollKeys(e) { } function fix_block(e, t) { for (var o = parseInt(window.innerWidth), r = parseInt(window.innerHeight), n = parseInt(document.querySelector("header").offsetHeight) + 15, l = 0; l < e.length; l++) { var i = e[l], s = i.getAttribute("data-width"), c = i.querySelector("._side-block"); s || (s = 0), o > s && (c.offsetHeight < r - (n + 30) ? (t > offset(i).top - (n + 15) ? c.style.cssText = "position:fixed;bottom:auto;top:" + n + "px;width:" + i.offsetWidth + "px;left:" + offset(i).left + "px;" : a(c), t > i.offsetHeight + offset(i).top - (c.offsetHeight + (n + 15)) && (i.style.cssText = "position:relative;", c.style.cssText = "position:absolute;bottom:0;top:auto;left:0px;width:100%")) : a(c)) } function a(e) { e.style.cssText = "position:relative;bottom:auto;top:0px;left:0px;" } } function custom_scroll(e) { scr_body.style.overflow = "hidden"; var t = window.innerHeight, o = document.querySelector("._custom-scroll__line"), r = document.querySelector(".wrapper").offsetHeight, n = Math.min(t, Math.round(t * (t / r))); if (r > t) { if (!o) { var l = document.createElement("div"); o = document.createElement("div"), l.setAttribute("class", "_custom-scroll"), o.setAttribute("class", "_custom-scroll__line"), l.appendChild(o), scr_body.appendChild(l) } o.style.height = n + "px" } } isMobile.any(); var new_pos = pageYOffset; function scroll_animate(e) { var t = window.innerHeight, o = document.querySelector(".wrapper").offsetHeight; pageYOffset; if (40 == e.keyCode || 34 == e.keyCode || e.deltaX > 0 || e.deltaY < 0 ? new_pos -= 100 : (38 == e.keyCode || 33 == e.keyCode || e.deltaX < 0 || e.deltaY > 0) && (new_pos += 100), new_pos > o - t && (new_pos = o - t), new_pos < 0 && (new_pos = 0), scrolling) { scrolling = !1, _goto(new_pos, 1e3); var r = 100; -1 != navigator.appVersion.indexOf("Mac") && (r *= 2), setTimeout(function () { scrolling = !0, _goto(new_pos, 1e3) }, r) } }